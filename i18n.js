export const translations = {
  ja: {
    menu: {
      title: 'Peggy Girls',
      start: 'ã‚¹ã‚¿ãƒ¼ãƒˆ',
      upgrade: 'ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰',
      skills: 'ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼',
      reset: 'é€²æ—ãƒªã‚»ãƒƒãƒˆ',
      settings: 'è¨­å®š',
      credit: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ'
    },
    upgrade: {
      xp: 'çµŒé¨“å€¤: ',
      hp: 'HPã‚¢ãƒƒãƒ—(+10) 10XP',
      atk: 'æ”»æ’ƒã‚¢ãƒƒãƒ—(+10%) 10XP',
      back: 'æˆ»ã‚‹'
    },
    skillTree: {
      title: 'ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼',
      back: 'æˆ»ã‚‹',
      unlock: '{cost}ã§ç¿’å¾—',
      unlocked: 'ç¿’å¾—æ¸ˆã¿',
      skills: {
        doubleShot: {
          name: 'ãƒ€ãƒ–ãƒ«ã‚·ãƒ§ãƒƒãƒˆ',
          desc: '2é€£ç¶šã§æ’ƒã¦ã‚‹ã‚ˆâ˜†',
          cost: '15XP'
        },
        maxHp: {
          name: 'HPã‚¢ãƒƒãƒ—',
          desc: 'æœ€å¤§HPãŒ20å¢—ãˆã‚‹ã‚ˆâ™ª',
          cost: '10XP'
        }
      }
    },
    hud: {
      hp: 'HP: ',
      ammo: 'å¼¾: ',
      untilAttack: 'æ”»æ’ƒã¾ã§',
      damage: 'ãƒ€ãƒ¡ãƒ¼ã‚¸',
      pause: 'ãƒãƒ¼ã‚º',
      resume: 'å†é–‹',
      speed: 'é€Ÿåº¦',
      speed1: '1x',
      speed2: '2x'
    },
    balls: {
      normal: { name: 'ãƒŽãƒ¼ãƒžãƒ«', full: 'ãƒŽãƒ¼ãƒžãƒ«ãƒœãƒ¼ãƒ«' },
      split: { name: 'ã‚¹ãƒ—ãƒªãƒƒãƒˆ', full: 'ã‚¹ãƒ—ãƒªãƒƒãƒˆãƒœãƒ¼ãƒ«' },
      heal: { name: 'ãƒ’ãƒ¼ãƒ«', full: 'ãƒ’ãƒ¼ãƒ«ãƒœãƒ¼ãƒ«' },
      big: { name: 'ãƒ“ãƒƒã‚°', full: 'ãƒ“ãƒƒã‚°ãƒœãƒ¼ãƒ«' },
      penetration: { name: 'ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', full: 'ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒœãƒ¼ãƒ«' }
    },
    reward: {
      title: 'ãƒªã‚¶ãƒ«ãƒˆ',
      coinSuffix: 'ã‚³ã‚¤ãƒ³GET',
      message: 'å ±é…¬ãƒœãƒ¼ãƒ«ã‚’é¸ã‚“ã§ã­',
      options: {
        split: { desc: 'å¼¾ãŒ2ã¤ã«åˆ†è£‚ã™ã‚‹ã‚ˆâ™ª' },
        heal: { desc: 'å½“ãŸã‚‹ã¨HPå›žå¾©ã™ã‚‹ã‚ˆâ˜†' },
        big: { desc: 'å¼¾ãŒã§ã‹ããªã‚‹ã‚ˆâ˜†' },
        penetration: { desc: 'æ•µã‚’è²«é€šã™ã‚‹ã‚ˆâ™¡' }
      }
    },
    rareReward: { title: 'ãƒ¬ã‚¢å ±é…¬ã‚²ãƒƒãƒˆï¼', continue: 'OK' },
    event: { title: 'ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿâ˜†' },
    shop: {
      title: 'ã‚·ãƒ§ãƒƒãƒ—ã ã‚ˆâ˜†',
      close: 'ã‚„ã‚ã‚‹',
      buy: 'è³¼å…¥',
      sell: 'å‰Šé™¤',
      upgrade: 'å¼·åŒ–',
      relic: 'ãƒ¬ãƒªãƒƒã‚¯',
      buyRelic: 'å…¥æ‰‹'
    },
    xp: { title: 'çµŒé¨“å€¤GET! +', continue: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸' },
    gameOver: { title: 'ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ðŸ˜­', retry: 'ãƒªãƒˆãƒ©ã‚¤' },
    gameClear: { title: 'ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢âœ¨', menu: 'ã‚¿ã‚¤ãƒˆãƒ«ã¸' },
    reload: { text: 'ãƒªãƒ­ãƒ¼ãƒ‰ä¸­â€¦' },
    settings: {
      title: 'è¨­å®š',
      language: 'è¨€èªž',
      options: { ja: 'æ—¥æœ¬èªž', en: 'English' },
      close: 'é–‰ã˜ã‚‹'
    },
    credit: { close: 'é–‰ã˜ã‚‹' },
    progress: { randomEvent: 'ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ' },
    events: {
      spring: {
        text: 'ã‚­ãƒ©ã‚­ãƒ©ã®æ³‰ã‚’ç™ºè¦‹ã—ãŸã‚ˆâ˜†',
        choices: {
          drink: 'ã‚´ã‚¯ã‚´ã‚¯é£²ã‚€ðŸ’–',
          skip: 'ã‚„ã‚ã¨ãã€œ'
        },
        results: {
          drink: 'HPãŒ20å›žå¾©ã—ãŸã‚ˆðŸ’•',
          skip: 'ä½•ã‚‚å¤‰ã‚ã‚‰ãªã‹ã£ãŸã‚ˆã€œ'
        }
      },
      powerStone: {
        text: 'æ€ªã—ã„ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³âœ¨ã©ã®ãƒœãƒ¼ãƒ«ã‚’å¼·åŒ–ã™ã‚‹ï¼Ÿ',
        choiceLabel: '{type}ãƒœãƒ¼ãƒ«å¼·åŒ–ã™ã‚‹ã€œ',
        result: '{type}ãƒœãƒ¼ãƒ«ãŒãƒ‘ãƒ¯ãƒ¼ã‚¢ãƒƒãƒ—ã—ãŸã‚ˆâœ¨',
        passLabel: 'ã‚„ã£ã±ãƒ‘ã‚¹',
        passResult: 'å¼·åŒ–ã—ãªã‹ã£ãŸã‚ˆã€œ'
      },
      trap: {
        text: 'ãƒˆã‚²ãƒˆã‚²ã®ç½ ãŒã‚ã‚‹ã£ã½ã„â€¦',
        choices: {
          avoid: 'ãã£ã¨é¿ã‘ã‚‹âœ¨',
          step: 'è¸ã‚“ã§ã¿ã‚‹â‰ï¸'
        },
        results: {
          avoid: 'ä¸Šæ‰‹ãé¿ã‘ãŸã‚ˆâ™ª',
          step: 'ã‚¤ã‚¿ã‚¿â€¦HPãŒ20æ¸›ã£ã¡ã‚ƒã£ãŸðŸ’¦'
        }
      },
      foundBall: {
        text: 'é“ç«¯ã«ãƒŽãƒ¼ãƒžãƒ«ãƒœãƒ¼ãƒ«ãŒè½ã¡ã¦ãŸï¼',
        choices: {
          take: 'æ‹¾ã£ã¡ã‚ƒãŠðŸŽ€',
          skip: 'ä»Šã¯ã„ã‚‰ãªã„ã‹ã‚‚'
        },
        results: {
          take: 'ãƒŽãƒ¼ãƒžãƒ«ãƒœãƒ¼ãƒ«ã‚²ãƒƒãƒˆã ã‚ˆâ˜†',
          skip: 'ã‚¹ãƒ«ãƒ¼ã—ãŸã‚ˆã€œ'
        }
      },
      treasure: {
        text: 'ã‚­ãƒ©ã‚­ãƒ©ã®å®ç®±ã‚’è¦‹ã¤ã‘ãŸã‚ˆâ˜†',
        choices: {
          open: 'é–‹ã‘ã‚‹ðŸ’Ž',
          leave: 'ãã®ã¾ã¾ã«ã™ã‚‹'
        },
        results: {
          open: '30ã‚³ã‚¤ãƒ³ã‚’ã‚²ãƒƒãƒˆã—ãŸã‚ˆðŸ’°',
          leave: 'ä½•ã‚‚èµ·ããªã‹ã£ãŸã€œ'
        }
      }
    },
      history: {
        title: 'ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´',
        v1_7: 'v1.7 (2025-08-17) 5äººç›®ã‚­ãƒ£ãƒ©è¿½åŠ ',
        v1_6: 'v1.6 (2025-08-15) ãƒœã‚¹ã®ã‚ªãƒ¼ãƒ©æ¼”å‡ºã¨æ”»æ’ƒã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¿½åŠ ã€ãƒœã‚¹æ’ƒç ´å¾Œã«å…¨å›žå¾©ã€ãƒ¬ã‚¢å ±é…¬æ”¹å–„',
        v1_5: 'v1.5 (2025-08-11) 4äººç›®ã‚­ãƒ£ãƒ©è¿½åŠ ',
      v1_4: 'v1.4 (2025-08-10) æ•µç”»åƒãƒ•ã‚¡ã‚¤ãƒ«åã®æ•´ç†ï¼†å‚ç…§æ›´æ–°',
      v1_3: 'v1.3 (2025-08-09) çˆ†å¼¾è¡çªã®ãƒã‚°ä¿®æ­£ï¼†ã‚³ã‚¤ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè¿½åŠ ',
      v1_2: 'v1.2 (2025-08-06) ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ã‚’æ›´æ–°',
      v1_1: 'v1.1 (2025-08-05) ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ï¼†ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã€å¼¾æ•°ã‚¢ã‚¤ã‚³ãƒ³ã¨ç‰¹æ®Šå¼¾é¸æŠžã€ã‚¹ãƒ†ãƒ¼ã‚¸é€²è¡Œã¨æ•µHPã‚¹ã‚±ãƒ¼ãƒ«ã€ãƒªãƒ­ãƒ¼ãƒ‰æ¼”å‡ºã€ã‚¹ãƒ†ãƒ¼ã‚¸5ã§çµŒé¨“å€¤ï¼†ã‚¹ã‚­ãƒ«å¼·åŒ–ã‚’è¿½åŠ ',
      v1_0: 'v1.0 (2025-08-05) ã‚¹ãƒ†ãƒ¼ã‚¸5ã‚¯ãƒªã‚¢ã§çµŒé¨“å€¤ç²å¾—ï¼†ã‚¹ã‚­ãƒ«å¼·åŒ–è¿½åŠ ',
      v0_9_2: 'v0.9.2 (2025-08-05) ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼HP0ã§æ•—åŒ—ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¡¨ç¤º',
      v0_9_1: 'v0.9.1 (2025-08-05) åˆæœŸãƒœãƒ¼ãƒ«æ•°ã‚’3ã«è¨­å®š',
      v0_9: 'v0.9 (2025-08-05) å¼¾æ•°åˆ¶é™ã¨ãƒªãƒ­ãƒ¼ãƒ‰ã‚’å®Ÿè£…',
      v0_8: 'v0.8 (2025-08-05) çˆ†å¼¾ãƒšã‚°è¿½åŠ ',
      v0_7: 'v0.7 (2025-08-04) æ•—åŒ—ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¨ãƒ©ãƒ³ãƒ€ãƒ ç”»åƒ',
      v0_6: 'v0.6 (2025-08-04) ãƒšã‚°ã®ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã¨é»„è‰²ãƒšã‚°ã®ãƒ€ãƒ–ãƒ«ãƒ€ãƒ¡ãƒ¼ã‚¸',
      v0_5: 'v0.5 (2025-08-04) å‹åˆ©ç”»åƒã¨ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³',
      v0_4: 'v0.4 (2025-08-04) ç´¯ç©ãƒ€ãƒ¡ãƒ¼ã‚¸è¡¨ç¤ºã€ç€åœ°æ™‚ã«ãƒ€ãƒ¡ãƒ¼ã‚¸ç¢ºå®š',
      v0_3: 'v0.3 (2025-08-04) ãƒœãƒ¼ãƒ«è½ä¸‹ãƒ€ãƒ¡ãƒ¼ã‚¸ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ',
      v0_2: 'v0.2 (2025-08-04) æ•µãƒ€ãƒ¡ãƒ¼ã‚¸æ™‚ã«ç”»åƒã‚’ä¸€çž¬åˆ‡ã‚Šæ›¿ãˆ',
      v0_1: 'v0.1 (2025-08-03) åˆæœŸãƒªãƒªãƒ¼ã‚¹'
    },
    common: { ok: 'OK' }
  },
  en: {
    menu: {
      title: 'Peggy Girls',
      start: 'Start',
      upgrade: 'Upgrade',
      skills: 'Skill Tree',
      reset: 'Reset Progress',
      settings: 'Settings',
      credit: 'Credits'
    },
    upgrade: {
      xp: 'XP: ',
      hp: 'HP Up (+10) 10XP',
      atk: 'ATK Up (+10%) 10XP',
      back: 'Back'
    },
    skillTree: {
      title: 'Skill Tree',
      back: 'Back',
      unlock: 'Unlock for {cost}',
      unlocked: 'Unlocked',
      skills: {
        doubleShot: {
          name: 'Double Shot',
          desc: 'Shoot twice in a rowâ™ª',
          cost: '15XP'
        },
        maxHp: {
          name: 'HP Up',
          desc: 'Increase max HP by 20â˜†',
          cost: '10XP'
        }
      }
    },
    hud: {
      hp: 'HP: ',
      ammo: 'Ammo: ',
      untilAttack: 'Until Attack',
      damage: 'Damage',
      pause: 'Pause',
      resume: 'Resume',
      speed: 'Speed',
      speed1: '1x',
      speed2: '2x'
    },
    balls: {
      normal: { name: 'Normal', full: 'Normal Ball' },
      split: { name: 'Split', full: 'Split Ball' },
      heal: { name: 'Heal', full: 'Heal Ball' },
      big: { name: 'Big', full: 'Big Ball' },
      penetration: { name: 'Penetration', full: 'Penetration Ball' }
    },
    reward: {
      title: 'Result',
      coinSuffix: 'Coins',
      message: 'Choose your reward ball',
      options: {
        split: { desc: 'Splits into twoâ™ª' },
        heal: { desc: 'Restores HP on hitâ˜†' },
        big: { desc: 'Becomes biggerâ˜†' },
        penetration: { desc: 'Pierces enemiesâ™¡' }
      }
    },
    rareReward: { title: 'Rare Reward!', continue: 'OK' },
    event: { title: 'Random Eventâ˜†' },
    shop: {
      title: 'Shop Timeâ˜†',
      close: 'Leave',
      buy: 'Buy',
      sell: 'Remove',
      upgrade: 'Upgrade',
      relic: 'Relic',
      buyRelic: 'Buy'
    },
    xp: { title: 'XP Gained! +', continue: 'Menu' },
    gameOver: { title: 'Game OverðŸ˜­', retry: 'Retry' },
    gameClear: { title: 'Game Clearâœ¨', menu: 'Back to Title' },
    reload: { text: 'Reloadingâ€¦' },
    settings: {
      title: 'Settings',
      language: 'Language',
      options: { ja: 'Japanese', en: 'English' },
      close: 'Close'
    },
    credit: { close: 'Close' },
    progress: { randomEvent: 'Random Event' },
    events: {
      spring: {
        text: 'You found a sparkling springâ˜†',
        choices: {
          drink: 'Drink itðŸ’–',
          skip: 'Leave it'
        },
        results: {
          drink: 'Recovered 20 HPðŸ’•',
          skip: 'Nothing happened~'
        }
      },
      powerStone: {
        text: 'A suspicious power stoneâœ¨ Which ball will you enhance?',
        choiceLabel: 'Enhance the {type} ball',
        result: 'The {type} ball powered upâœ¨',
        passLabel: 'Pass',
        passResult: 'Didn\u2019t enhance~'
      },
      trap: {
        text: 'Looks like a spiky trapâ€¦',
        choices: {
          avoid: 'Carefully avoidâœ¨',
          step: 'Step on itâ‰ï¸'
        },
        results: {
          avoid: 'Dodged safelyâ™ª',
          step: 'Ouch... Lost 20 HPðŸ’¦'
        }
      },
      foundBall: {
        text: 'A normal ball was lying on the road!',
        choices: {
          take: 'Pick it upðŸŽ€',
          skip: 'Maybe not now'
        },
        results: {
          take: 'Got a normal ballâ˜†',
          skip: 'Skipped it~'
        }
      },
      treasure: {
        text: 'You spot a shiny treasure chestâ˜†',
        choices: {
          open: 'Open itðŸ’Ž',
          leave: 'Leave it'
        },
        results: {
          open: 'Got 30 coinsðŸ’°',
          leave: 'Nothing happened~'
        }
      }
    },
      history: {
        title: 'Version History',
        v1_7: 'v1.7 (2025-08-17) Added 5th character',
        v1_6: 'v1.6 (2025-08-15) Added boss aura and attack countdown, fully heal after boss defeat, and improved rare rewards',
        v1_5: 'v1.5 (2025-08-11) Added 4th character',
        v1_4: 'v1.4 (2025-08-10) Organized enemy image filenames and updated references',
        v1_3: 'v1.3 (2025-08-09) Fixed bomb collision bug and added coin icon credit',
        v1_2: 'v1.2 (2025-08-06) Updated version history',
        v1_1: 'v1.1 (2025-08-05) Added menu screen & start button, ammo icons and special ball selection, stage progression and enemy HP scale, reload animation, and XP & skill upgrade at stage 5',
        v1_0: 'v1.0 (2025-08-05) Added XP and skill upgrade for clearing stage 5',
      v0_9_2: 'v0.9.2 (2025-08-05) Show defeat overlay when player HP reaches 0',
      v0_9_1: 'v0.9.1 (2025-08-05) Set initial ball count to 3',
      v0_9: 'v0.9 (2025-08-05) Implemented ammo limit and reload',
      v0_8: 'v0.8 (2025-08-05) Added bomb pegs',
      v0_7: 'v0.7 (2025-08-04) Defeat overlay and random images',
      v0_6: 'v0.6 (2025-08-04) Randomized pegs and yellow peg double damage',
      v0_5: 'v0.5 (2025-08-04) Victory image and retry button',
      v0_4: 'v0.4 (2025-08-04) Cumulative damage display and damage confirmation on landing',
      v0_3: 'v0.3 (2025-08-04) Ball drop damage and effect',
      v0_2: 'v0.2 (2025-08-04) Temporary image change on enemy damage',
      v0_1: 'v0.1 (2025-08-03) Initial release'
    },
    common: { ok: 'OK' }
  }
};

let currentLang = 'ja';

export function t(key) {
  return key.split('.').reduce((o, k) => (o ? o[k] : undefined), translations[currentLang]) || key;
}

export function setLanguage(lang) {
  if (!translations[lang]) return;
  currentLang = lang;
  document.documentElement.lang = lang;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    const txt = t(key);
    if (txt !== undefined) {
      el.textContent = txt;
    }
  });
  const historyEl = document.getElementById('version-history');
  if (historyEl) {
    const history = translations[currentLang].history;
    const titleEl = historyEl.querySelector('h3');
    const listEl = historyEl.querySelector('ul');
    if (history) {
      if (titleEl) titleEl.textContent = history.title || '';
      if (listEl) {
        listEl.innerHTML = '';
        Object.keys(history)
          .filter(k => k !== 'title')
          .forEach(k => {
            const li = document.createElement('li');
            li.textContent = history[k];
            listEl.appendChild(li);
          });
      }
    }
  }
  localStorage.setItem('lang', lang);
}
